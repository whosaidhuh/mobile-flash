!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("prop-types")):"function"==typeof define&&define.amd?define("ReactSpritz",["react","prop-types"],e):"object"==typeof exports?exports.ReactSpritz=e(require("react"),require("prop-types")):t.ReactSpritz=e(t.react,t["prop-types"])}("undefined"!=typeof self?self:this,function(t,e){return function(t){var e={};function r(u){if(e[u])return e[u].exports;var n=e[u]={i:u,l:!1,exports:{}};return t[u].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,u){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:u})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){return t&&t.__esModule?t:{default:t}}(r(1));e.default=u.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var u=e[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,r,u){return r&&t(e.prototype,r),u&&t(e,u),e}}(),n=i(r(2)),o=i(r(3));function i(t){return t&&t.__esModule?t:{default:t}}r(4);var a=function(t){return/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g.test(t)},s=function(t){return t.split(/\s+/)},d=6e4,c=function(t,e){if(!t||"string"!=typeof t)throw new Error("Text must be a string");var r=s(t);return Math.trunc(r.length/e*d)/r.join("").length},p=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));l.call(r);var u=t.wpm,n=t.text,o=t.startTimeout;return r.charTempo=c(n,u),r.standardTempo=Math.trunc(d/u),r.words=s(n),r.state={currentWordIndex:o?0:-1},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,n.default.Component),u(e,[{key:"componentDidMount",value:function(){var t=this;this.props.playing&&window.requestAnimationFrame(function(){return t.onPlay()})}},{key:"componentDidUpdate",value:function(t){var e=this;return t.wpm!==this.props.wpm&&(clearTimeout(this.timer),this.charTempo=c(this.props.text,this.props.wpm),this.timer=setTimeout(this._displayNextWord,this._getNextWordTimeout())),t.text!==this.props.text&&(this.words=s(this.props.text),this.setState({currentWordIndex:0})),this.props.stop&&!t.stop?this.onStop():this.props.playing&&!t.playing?window.requestAnimationFrame(function(){return e.onPlay()}):!(this.props.playing||!t.playing)&&this.onPause()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),clearTimeout(this.startTimeout)}},{key:"render",value:function(){if(!this.props.text)return null;var t=this.state,e=t.currentWordIndex,r=t.playing,u=-1!==e&&this.words[e],o=u&&function(t){return a(t)?-1:Math.floor(t.replace(/[\W]/g,"").length/2)}(u);return n.default.createElement("div",{className:"container"},u&&n.default.createElement("div",{className:"spritz"},n.default.createElement("div",{className:"leftSide"},-1!==o&&u.slice(0,o)),n.default.createElement("div",{className:"highlight"},-1===o?u:u[o]),n.default.createElement("div",{className:"rightSide"},-1!==o&&u.slice(o+1))),u&&this.props.startTimeout&&n.default.createElement("div",{style:{transition:"transform linear "+this.props.startTimeout+"ms"},className:r?"timeoutBlockHidden":"timeoutBlock"}))}}]),e}(),l=function(){var t=this;this._getNextWord=function(){var e=t.state.currentWordIndex+1;return e===t.words.length?{}:{word:t.words[e],index:e}},this._getNextWordTimeout=function(){var e=t.state.currentWordIndex,r=t.words[e],u=t.props.normalized?r.length*t.charTempo:t.standardTempo;return(/^\(|[,.)]$/.test(r)||a(r))&&(u+=t.standardTempo),Math.max(u,t.standardTempo)},this._displayNextWord=function(){var e=t._getNextWord(),r=e.word,u=e.index;if(!r)return t.onStop();var n=t.props.onDisplayNextWord;n&&n(r,u),t.setState({currentWordIndex:u}),t.timer=setTimeout(t._displayNextWord,t._getNextWordTimeout())},this._start=function(){t.timer=setTimeout(t._displayNextWord,t._getNextWordTimeout());var e=t.props.onStart;e&&e()},this.onPlay=function(){var e=t.props.startTimeout;if(t.setState({playing:!0}),!e)return t._start();t.startTimeout=setTimeout(t._start,e-300)},this.onPause=function(){clearTimeout(t.timer),t.setState({playing:!1});var e=t.props.onPause;e&&e()},this.onStop=function(){clearTimeout(t.timer),t.setState({playing:!1,currentWordIndex:-1});var e=t.props.onStop;e&&e()}};p.propTypes={wpm:o.default.number,startTimeout:o.default.number,text:o.default.string.isRequired,playing:o.default.bool,stop:o.default.bool,onStart:o.default.func,onPause:o.default.func,onStop:o.default.func,onDisplayNextWord:o.default.func,normalized:o.default.bool},p.defaultProps={wpm:250,startTimeout:800,playing:!1,stop:!1,onStart:null,onPause:null,onStop:null,onDisplayNextWord:null},e.default=p},function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){}])});